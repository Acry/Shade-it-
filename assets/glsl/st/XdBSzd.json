[{"ver":"0.1","info":{"id":"XdBSzd","date":"1414746800","viewed":5755,"name":"Tissue","username":"iq","description":"Another experiment in stacking texture in a 2D plane deformation.","likes":96,"published":3,"flags":0,"tags":[]},"renderpass":[{"inputs":[{"id":"XdX3Rn","filepath":"\/media\/a\/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","previewfilepath":"\/media\/ap\/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3zn","filepath":"\/media\/a\/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","previewfilepath":"\/media\/ap\/f735bee5b64ef98879dc618b016ecf7939a5756040c2cde21ccb15e69a6e1cfb.png","type":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"\/\/ Created by inigo quilez - iq\/2014\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n#define HSAMPLES 128\n#define MSAMPLES   8\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 ran = texture( iChannel1, iTime*vec2(0.11,0.23)+fragCoord\/iChannelResolution[1].xy );\n\n\tvec2  p = (-iResolution.xy+2.0*(fragCoord+ran.xy-0.5))\/iResolution.y;\n    float t =  iTime + 10.0*iMouse.x\/iResolution.x;\n\n    float dof = dot( p, p );\n\n    vec3 tot = vec3(0.0);\n    for( int j=0; j<MSAMPLES; j++ )\n    {\n        float mnc = (float(j)+ran.z)\/float(MSAMPLES);\n        float tim = t + 0.5*(1.0\/24.0)*(float(j)+ran.w)\/float(MSAMPLES);\n        vec2  off = vec2( 0.2*tim, 0.2*sin(tim*0.2) );\n \t\n\t    vec2 q = p + dof*0.03*mnc*vec2(cos(15.7*mnc),sin(15.7*mnc));\n        vec2 r = vec2( length(q), 0.5+0.5*atan(q.y,q.x)\/3.1416 );\n\n        vec3 uv;\n        for( int i=0; i<HSAMPLES; i++ )\n        {\n            uv.z = (float(i)+ran.x)\/float(HSAMPLES-1);\n            uv.xy = off + vec2( 0.2\/(r.x*(1.0-0.6*uv.z)), r.y );\n            if( textureLod( iChannel0, uv.xy, 0.0 ).x < uv.z )\n                break;\n        }\n    \n        vec2  uv2 = uv.xy + vec2(0.02,0.0);\n        float dif = clamp( 8.0*(textureLod(iChannel0, uv.xy, 0.0).x - textureLod(iChannel0, uv2.xy, 0.0).x), 0.0, 1.0 );\n        vec3  col = vec3(1.0);\n        col *= 1.0-textureLod( iChannel0, 1.0*uv.xy, 0.0 ).xyz;\n        col = mix( col*1.2, 1.5*textureLod( iChannel0, vec2(uv.x*0.4,0.1*sin(2.0*uv.y*3.1316)), 0.0 ).yzx, 1.0-0.7*col );\n        col = mix( col, vec3(0.2,0.1,0.1), 0.5-0.5*smoothstep( 0.0, 0.3, 0.3-0.8*uv.z + texture( iChannel0, 2.0*uv.xy + uv.z ).x ) );      \n        col *= 1.0-1.3*uv.z;\n        col *= 1.3-0.2*dif;        \n        col *= exp(-0.35\/(0.0001+r.x));\n        \n        tot += col;\n    }\n    tot \/= float(MSAMPLES);\n \n    tot.x += 0.05;\n    tot = 1.05*pow( tot, vec3(0.6,1.0,1.0) );\n    \n    fragColor = vec4( tot*smoothstep(0.0,2.0,iTime), 1.0 );\n}","name":"Image","description":"","type":"image"}]}]