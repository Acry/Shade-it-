[{"ver":"0.1","info":{"id":"4ltSRS","date":"1480282799","viewed":1758,"name":"nebula smoke","username":"mahalis","description":"pentagons all hashed up","likes":24,"published":3,"flags":0,"tags":[]},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float polygonDistance(vec2 p, float radius, float angleOffset, int sideCount) {\n\tfloat a = atan(p.x, p.y)+ angleOffset;\n\tfloat b = 6.28319 \/ float(sideCount);\n\treturn cos(floor(.5 + a \/ b) * b - a) * length(p) - radius;\n}\n\n\/\/ from https:\/\/www.shadertoy.com\/view\/4djSRW\n#define HASHSCALE1 443.8975\nfloat hash11(float p) \/\/ assumes p in ~0-1 range\n{\n\tvec3 p3  = fract(vec3(p) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\n#define HASHSCALE3 vec3(.1031, .1030, .0973)\nvec2 hash21(float p) \/\/ assumes p in larger integer range\n{\n\tvec3 p3 = fract(vec3(p) * HASHSCALE3);\n\tp3 += dot(p3, p3.yzx + 19.19);\n\treturn fract(vec2((p3.x + p3.y)*p3.z, (p3.x+p3.z)*p3.y));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = vec2(0.5) - (fragCoord.xy \/ iResolution.xy);\n    uv.x *= iResolution.x \/ iResolution.y;\n    \n    float accum = 0.;\n    for(int i = 0; i < 83; i++) {\n        float fi = float(i);\n        float thisYOffset = mod(hash11(fi * 0.017) * (iTime + 19.) * 0.2, 4.0) - 2.0;\n        vec2 center = (hash21(fi) * 2. - 1.) * vec2(1.1, 1.0) - vec2(0.0, thisYOffset);\n        float radius = 0.5;\n        vec2 offset = uv - center;\n        float twistFactor = (hash11(fi * 0.0347) * 2. - 1.) * 1.9;\n        float rotation = 0.1 + iTime * 0.2 + sin(iTime * 0.1) * 0.9 + (length(offset) \/ radius) * twistFactor;\n        accum += pow(smoothstep(radius, 0.0, polygonDistance(uv - center, 0.1 + hash11(fi * 2.3) * 0.2, rotation, 5) + 0.1), 3.0);\n    }\n    \n    vec3 subColor = vec3(0.4, 0.8, 0.2); \/\/vec3(0.4, 0.2, 0.8);\n    vec3 addColor = vec3(0.3, 0.2, 0.1);\/\/vec3(0.3, 0.1, 0.2);\n    \n\tfragColor = vec4(vec3(1.0) - accum * subColor + addColor, 1.0);\n}","name":"Image","description":"","type":"image"}]}]